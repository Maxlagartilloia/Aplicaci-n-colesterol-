<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- METADATOS PARA MINIATURA EN WHATSAPP (OPEN GRAPH) -->
    <title>Vitalia - Salud Cardiovascular por Criss Lombeida</title>
    <meta name="description" content="Plan ecuatoriano de 15 días para bajar el colesterol naturalmente. Diseñado por Criss Lombeida.">
    <meta property="og:title" content="Vitalia: Tu Corazón al Estilo Ecuatoriano">
    <meta property="og:description" content="Baja el colesterol con quinua, chochos y batidos verdes. Plan de Criss Lombeida.">
    <meta property="og:type" content="website">
    <!-- Miniatura profesional -->
    <meta property="og:image" content="https://images.unsplash.com/photo-1590301157890-4810ed352733?q=80&w=1200&h=630&auto=format&fit=crop">
    <meta property="og:url" content="https://tu-usuario.github.io/vitalia">

    <!-- Tailwind CSS e Iconos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            background-color: #f1f5f9;
        }
        .progress-transition { transition: width 1s cubic-bezier(0.4, 0, 0.2, 1); }
        .tap-scale:active { transform: scale(0.97); }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        
        /* Animación suave para cambios de vista */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-slate-900">

    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-2xl relative pb-28 overflow-x-hidden">
        <!-- El contenido se inyecta vía JavaScript -->
    </div>

    <script>
        // --- PROGRAMA DE 15 DÍAS - GASTRONOMÍA ECUATORIANA SALUDABLE POR CRISS LOMBEIDA ---
        const PROGRAM = {
            1: {
                title: "Despertar de la Sierra",
                ritual: { name: "Agua tibia con limón sutil", time: "07:00 AM", recipe: "Exprimir un limón sutil en una taza de agua tibia. Activa la bilis para procesar grasas." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Quinua con Canela y Manzana", ingredients: ["1/2 taza quinua cocida", "1 taza agua", "Manzana picada", "Canela"], recipe: "Hervir la quinua con canela. La fibra de la quinua absorbe el exceso de LDL." },
                    lunch: { time: "01:30 PM", name: "Sopa de Lentejas y Pollo de Campo", ingredients: ["Lentejas", "120g pechuga pollo", "Cebolla blanca", "Comino"], recipe: "Guisar las lentejas con el pollo picado. Usar agua, no aceite. Alta fibra y proteína limpia." },
                    dinner: { time: "07:30 PM", name: "Crema de Zapallo y Jengibre", ingredients: ["Zapallo maduro", "Trozo de jengibre", "Ajo"], recipe: "Cocinar y licuar. El zapallo es bajo en sodio y el jengibre limpia las arterias." }
                },
                exercise: { name: "Caminata Moderada", dur: "25 min" },
                challenge: "Cero Azúcar en el Café",
                edu: "La quinua es el cereal de oro para limpiar tus vasos sanguíneos."
            },
            2: {
                title: "Poder Verde y Chochos",
                ritual: { name: "Batido Verde Vitalia", time: "07:00 AM", recipe: "Licuar: Espinaca, 1 rodaja piña, pepino y linaza. Fibra líquida directa al corazón." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Ensalada de Chochos Proteica", ingredients: ["1 taza chochos", "Tomate riñón", "Cebolla", "Limón"], recipe: "Mezclar como un cevichocho. El chocho reduce el colesterol de forma acelerada." },
                    lunch: { time: "01:30 PM", name: "Pescado al Vapor con Yuca", ingredients: ["Corvina o Dorado", "1 trozo yuca cocida", "Ensalada curtida"], recipe: "Cocinar el pescado con hierbitas. La yuca cocida es un carbohidrato de absorción lenta." },
                    dinner: { time: "07:30 PM", name: "Revuelto de Mellocos", ingredients: ["Mellocos picados", "3 claras de huevo", "Ajo"], recipe: "Saltear mellocos con claras. Los mellocos protegen tu sistema digestivo." }
                },
                exercise: { name: "Subir Escaleras", dur: "10 min" },
                challenge: "Beber 8 Vasos de Agua",
                edu: "Los chochos contienen lupanina, que ayuda a bajar los lípidos en sangre."
            },
            3: {
                title: "Ceviche y Salud Costeña",
                ritual: { name: "Infusión de Cúrcuma", time: "07:00 AM", recipe: "Cúrcuma en agua caliente con pizca de pimienta. Desinflama venas y arterias." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Verde Cocido con Queso Fresco", ingredients: ["1 verde mediano", "Queso tierno bajo en sal"], recipe: "Cocinar el verde en agua. No freír. El potasio regula la presión arterial." },
                    lunch: { time: "01:30 PM", name: "Ceviche de Pescado (Puro Limón)", ingredients: ["Pescado blanco fresco", "Cebolla paiteña", "Cilantro"], recipe: "Marinar solo con limón. El pescado crudo conserva su Omega-3 intacto." },
                    dinner: { time: "07:30 PM", name: "Sopa Clara de Verduras", ingredients: ["Apio", "Zanahoria", "80g pollo", "Cilantro"], recipe: "Hervir vegetales y pollo. Sopa liviana para que el hígado descanse." }
                },
                exercise: { name: "Caminata Rápida", dur: "30 min" },
                challenge: "Cero Frituras Hoy",
                edu: "El limón sutil ayuda a alcalinizar tu sangre y degradar lípidos."
            },
            4: {
                title: "Quinua y Menestra Detox",
                ritual: { name: "Batido Verde Acelerador", time: "07:00 AM", recipe: "Apio, manzana verde, perejil y agua. Escoba líquida para el colesterol." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Amaranto con Moras", ingredients: ["Amaranto cocido", "Moras de la sierra", "Canela"], recipe: "El amaranto es rico en escualeno, que bloquea el colesterol malo." },
                    lunch: { time: "01:30 PM", name: "Menestra de Fréjol Tierno", ingredients: ["Fréjol tierno", "Pechuga de pavo", "Arroz integral"], recipe: "Cocinar los fréjoles con cebolla y comino. Usar pavo magro." },
                    dinner: { time: "07:30 PM", name: "Habas Tiernas con Huevo", ingredients: ["Habas cocidas", "1 huevo entero", "Perejil"], recipe: "La cáscara de la haba tiene fibra que atrapa grasas pesadas." }
                },
                exercise: { name: "Trote Suave", dur: "20 min" },
                challenge: "Snack de Fruta Tropical",
                edu: "Las legumbres andinas son el sustituto perfecto de la carne roja."
            },
            5: {
                title: "Maito y Selva Viva",
                ritual: { name: "Té de Guayusa", time: "07:00 AM", recipe: "Infusión de guayusa. Energía antioxidante que moviliza grasas." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Maito de Tilapia (Al Horno)", ingredients: ["Filete Tilapia", "Tomate", "Cebolla blanca"], recipe: "Envolver en papel o hoja y hornear. Cero grasa añadida." },
                    lunch: { time: "01:30 PM", name: "Lomo Fino con Camote", ingredients: ["120g lomo magro", "1 camote horneado", "Berros"], recipe: "Lomo a la plancha. El camote es dulce pero saludable para el corazón." },
                    dinner: { time: "07:30 PM", name: "Sopa de Zanahoria Blanca", ingredients: ["Zanahoria blanca", "Cebolla", "Cilantro"], recipe: "Licuar vegetales cocidos. Muy ligera y rica en fibra de raíz." }
                },
                exercise: { name: "Caminata con Pendiente", dur: "35 min" },
                challenge: "Cero Salero en Mesa",
                edu: "La guayusa tiene más antioxidantes que el té verde tradicional."
            },
            6: {
                title: "Albúmina y Pescado Blanco",
                ritual: { name: "Batido de Aloe y Piña", time: "07:00 AM", recipe: "Cristal de sábila licuado con piña. Cicatriza y limpia arterias." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Omelette de Claras y Tomate", ingredients: ["3 claras", "Tomate riñón", "Orégano"], recipe: "El licopeno del tomate protege las paredes de tus arterias." },
                    lunch: { time: "01:30 PM", name: "Merluza al Vapor con Judías", ingredients: ["Filete de merluza", "Judías verdes", "Pimienta"], recipe: "Proteína pura casi 0% grasa. Reseteo total del hígado." },
                    dinner: { time: "07:30 PM", name: "Sopa de Puerros y Papa", ingredients: ["Puerro", "1 papa pequeña", "Apio"], recipe: "El puerro barre la placa arterial gracias a sus compuestos orgánicos." }
                },
                exercise: { name: "Bicicleta", dur: "25 min" },
                challenge: "Cero Harinas Blancas",
                edu: "El pescado blanco es la proteína estrella para bajar el LDL rápidamente."
            },
            7: {
                title: "Día de Granos Sagrados",
                ritual: { name: "Té de Manzanilla y Menta", time: "07:00 AM", recipe: "Relajante digestivo. El estrés es un factor silencioso del colesterol." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Quinua con Kiwi", ingredients: ["1/2 taza quinua", "1 kiwi picado", "Linaza"], recipe: "Vitamina C y fibra para fortalecer el sistema cardiovascular." },
                    lunch: { time: "01:30 PM", name: "Tofu Salteado con Brócoli", ingredients: ["Tofu firme", "Brócoli", "Jengibre", "Salsa soja"], recipe: "La proteína de soja ayuda activamente a reducir los niveles de grasa." },
                    dinner: { time: "07:30 PM", name: "Ensalada de Lentejas Fría", ingredients: ["Lentejas", "Perejil", "Limón", "Cebolla"], recipe: "Bloquea la absorción de grasas nocturnas con fibra soluble." }
                },
                exercise: { name: "Caminata Larga", dur: "45 min" },
                challenge: "Dormir 8 Horas",
                edu: "Tu primera semana de limpieza ha concluido con éxito."
            },
            8: {
                title: "Poder de la Sardina Andina",
                ritual: { name: "Agua tibia con Limón", time: "07:00 AM", recipe: "Mantenemos el hábito de limpieza hepática." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Yogur con Almendras", ingredients: ["Yogur griego 0%", "6 almendras", "Moras"], recipe: "Magnesio y Omega-3 para el ritmo de tu corazón." },
                    lunch: { time: "01:30 PM", name: "Sardinas con Ensalada de Tomate", ingredients: ["1 lata sardinas escurridas", "Tomate", "Cebolla"], recipe: "La sardina es el 'detergente' biológico para las arterias." },
                    dinner: { time: "07:30 PM", name: "Crema de Espinacas", ingredients: ["Espinaca", "Pavo picado", "Ajo"], recipe: "Nitratos naturales que mejoran el flujo sanguíneo." }
                },
                exercise: { name: "Escaleras", dur: "12 min" },
                challenge: "Cero Cafeína",
                edu: "La sardina es más pura que el atún en cuanto a metales pesados."
            },
            9: {
                title: "Corazón de Alcachofa",
                ritual: { name: "Batido de Pepino y Manzana", time: "07:00 AM", recipe: "Pepino, manzana verde y agua. Hidratación celular máxima." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Pan de Centeno con Huevo", ingredients: ["1 rebanada centeno", "1 huevo cocido", "Pimienta"], recipe: "Fibra densa y colina para tu metabolismo lipídico." },
                    lunch: { time: "01:30 PM", name: "Alcachofas Cocidas con Pollo", ingredients: ["2 alcachofas", "120g pollo", "Vinaigrette"], recipe: "La cinarina de la alcachofa estimula la eliminación de grasa." },
                    dinner: { time: "07:30 PM", name: "Sopa de Mellocos y Habas", ingredients: ["Mellocos", "Habas", "Caldo vegetal"], recipe: "Fuerza andina para regenerar tus tejidos sanguíneos." }
                },
                exercise: { name: "Caminata Moderada", dur: "30 min" },
                challenge: "Sin Carnes Rojas",
                edu: "La alcachofa es la planta número uno para cuidar el hígado graso."
            },
            10: {
                title: "Atún y Energía Marina",
                ritual: { name: "Agua con Jengibre", time: "07:00 AM", recipe: "Refuerzo antiinflamatorio para tu circulación." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Avena con Semillas de Zapallo", ingredients: ["Avena", "Pipas zapallo", "Pasas"], recipe: "El zapallo bloquea la absorción del colesterol malo." },
                    lunch: { time: "01:30 PM", name: "Atún a la Plancha con Batata", ingredients: ["Atún fresco", "1/2 batata horneada"], recipe: "Omega-3 denso. La batata da energía de alta calidad." },
                    dinner: { time: "07:30 PM", name: "Sopa de Verduras y Tofu", ingredients: ["Mix verduras", "50g tofu"], recipe: "Estabiliza lípidos nocturnos con proteína ligera." }
                },
                exercise: { name: "Trote Intervalado", dur: "20 min" },
                challenge: "Cero Bebidas Azucaradas",
                edu: "Tu sangre fluye hoy con menos viscosidad."
            },
            11: {
                title: "Pavo y Lino Molido",
                ritual: { name: "Batido de Berries y Lino", time: "07:00 AM", recipe: "Berries y lino molido. El lino es el mayor reductor natural de LDL." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Tostada de Aguacate y Tomate", ingredients: ["Pan integral", "Aguacate", "Cherries"], recipe: "Licopeno y grasas buenas protectoras." },
                    lunch: { time: "01:30 PM", name: "Estofado de Pavo con Zanahorias", ingredients: ["150g pavo", "Zanahoria", "Ajo"], recipe: "Proteína magra con fibra de raíz. Limpieza profunda." },
                    dinner: { time: "07:30 PM", name: "Garbanzos con Menta", ingredients: ["1/2 taza garbanzos", "Pepino", "Menta"], recipe: "Bloqueo de grasas antes de dormir." }
                },
                exercise: { name: "Caminata Rápida", dur: "35 min" },
                challenge: "Sin Alcohol",
                edu: "El hígado procesa grasa más rápido sin alcohol de por medio."
            },
            12: {
                title: "Bacalao y Pimientos",
                ritual: { name: "Agua con Vinagre de Manzana", time: "07:00 AM", recipe: "Equilibra pH para digerir proteínas de limpieza." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Avena con Chía", ingredients: ["Avena", "Chía", "Canela"], recipe: "Doble dosis de fibra. Día de máxima limpieza intestinal." },
                    lunch: { time: "01:30 PM", name: "Bacalao con Pimientos", ingredients: ["Filete bacalao", "Pimientos", "Ajo"], recipe: "0% grasa saturada. Vitamina C protectora arterial." },
                    dinner: { time: "07:30 PM", name: "Crema de Brócoli y Avena", ingredients: ["Brócoli", "1 cda avena para espesar"], recipe: "Sin lácteos. Antioxidantes para sueño reparador." }
                },
                exercise: { name: "Subir Escaleras", dur: "15 min" },
                challenge: "Cero Lácteos",
                edu: "El bacalao es la proteína de referencia para el corazón sano."
            },
            13: {
                title: "Pollo al Limón Sutil",
                ritual: { name: "Té Verde", time: "07:00 AM", recipe: "Mantenemos flujo de catequinas protectoras." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Yogur con Granola Casera", ingredients: ["Yogur 0%", "Avena tostada", "Nueces"], recipe: "Grasas HDL para fortalecer tus arterias." },
                    lunch: { time: "01:30 PM", name: "Pechuga al Limón con Espinacas", ingredients: ["150g pollo", "Limón sutil", "Ajo"], recipe: "El limón ayuda a metabolizar grasas residuales." },
                    dinner: { time: "07:30 PM", name: "Sopa de Lenteja Roja", ingredients: ["Lentejas rojas", "Cúrcuma"], recipe: "Sangre oxigenada y pura. Digestión muy rápida." }
                },
                exercise: { name: "Caminata Intensa", dur: "40 min" },
                challenge: "Sin Salero en Mesa",
                edu: "Menos sal hace tus arterias más elásticas hoy mismo."
            },
            14: {
                title: "Salmón y Quinoa Oro",
                ritual: { name: "Infusión de Cúrcuma", time: "07:00 AM", recipe: "Efecto antiinflamatorio final para tus venas." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Smoothie de Berries", ingredients: ["Mix berries", "Agua", "Chía"], recipe: "Antioxidantes masivos para tus capilares." },
                    lunch: { time: "01:30 PM", name: "Salmón con Quinoa y Espárragos", ingredients: ["Salmón", "Quinoa", "Espárragos"], recipe: "El Combo de Oro del corazón. Máxima nutrición." },
                    dinner: { time: "07:30 PM", name: "Tortilla de Champiñones", ingredients: ["3 claras", "Hongos"], recipe: "Proteína pura para terminar ciclo sin carga digestiva." }
                },
                exercise: { name: "HIIT Corto", dur: "15 min" },
                challenge: "Cero Ultraprocesados",
                edu: "Has eliminado ya gran parte de tus triglicéridos sobrantes."
            },
            15: {
                title: "Victoria Vital por Criss",
                ritual: { name: "Agua con Limón Sutil", time: "07:00 AM", recipe: "Celebrando el hábito que ha salvado tu corazón." },
                meals: {
                    breakfast: { time: "08:30 AM", name: "Avena Real Criss Lombeida", ingredients: ["Avena", "Nueces", "Lino", "Berries"], recipe: "El desayuno para mantener el LDL bajo de por vida." },
                    lunch: { time: "01:30 PM", name: "Trucha al Horno con Vegetales", ingredients: ["Trucha", "Brócoli", "Zanahoria", "Aceite Oliva"], recipe: "Simplicidad y salud. Tu nueva vida cardiovascular." },
                    dinner: { time: "07:30 PM", name: "Cena de Triunfo Ligera", ingredients: ["Sopa verduras", "Pechuga picada"], recipe: "Felicidades. Has renovado tu sistema cardiovascular en 15 días." }
                },
                exercise: { name: "Caminata de Meditación", dur: "50 min" },
                challenge: "Repetir Programa",
                edu: "¡Victoria! Por Criss Lombeida: Tu corazón es otro hoy."
            }
        };

        // --- GESTIÓN DE DATOS ---
        let state = {
            profile: JSON.parse(localStorage.getItem('v_prof_cl')) || null,
            logs: JSON.parse(localStorage.getItem('v_logs_cl')) || {},
            currentView: 'home'
        };

        function saveState() {
            localStorage.setItem('v_prof_cl', JSON.stringify(state.profile));
            localStorage.setItem('v_logs_cl', JSON.stringify(state.logs));
        }

        function getTodayId() { return new Date().toISOString().split('T')[0]; }

        function getDayNumber() {
            if (!state.profile) return 1;
            const start = new Date(state.profile.startDate);
            const now = new Date();
            const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24)) + 1;
            return diff > 0 ? (diff <= 15 ? diff : (diff % 15 || 15)) : 1;
        }

        // --- RENDERIZADO ---
        function render() {
            const app = document.getElementById('app');
            if (!state.profile) { renderOnboarding(app); return; }

            const dayNum = getDayNumber();
            const data = PROGRAM[dayNum];
            const todayId = getTodayId();
            
            if (!state.logs[todayId]) {
                state.logs[todayId] = { ritual: false, breakfast: false, lunch: false, dinner: false, exercise: false, challenge: false };
                saveState();
            }

            if (state.currentView === 'home') renderHome(app, data, state.logs[todayId], dayNum);
            else if (state.currentView === 'diet') renderDiet(app, data, dayNum);
            else if (state.currentView === 'stats') renderStats(app);

            lucide.createIcons();
        }

        function renderHome(app, data, currentLog, dayNum) {
            const completed = Object.values(currentLog).filter(v => v).length;
            const progress = Math.round((completed / 6) * 100);

            app.innerHTML = `
                <div class="fade-in">
                    <header class="bg-emerald-600 p-6 text-white rounded-b-[2.5rem] shadow-xl">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <p class="text-emerald-100 text-[10px] font-bold uppercase tracking-widest">Día ${dayNum} • ${state.profile.name}</p>
                                <h1 class="text-2xl font-extrabold leading-tight tracking-tighter">${data.title}</h1>
                            </div>
                            <div class="flex items-center gap-2 bg-white/20 px-3 py-1.5 rounded-full border border-white/20">
                                <i data-lucide="flame" class="w-4 h-4 text-orange-400 fill-orange-400"></i>
                                <span class="font-bold text-sm">${state.profile.streak || 1} d</span>
                            </div>
                        </div>
                        <div class="bg-white/10 p-5 rounded-3xl border border-white/20">
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold opacity-80 uppercase tracking-tighter">Limpieza Arterial</span>
                                <span class="text-xl font-black">${progress}%</span>
                            </div>
                            <div class="w-full bg-black/20 h-2.5 rounded-full overflow-hidden">
                                <div class="bg-white h-full progress-transition shadow-[0_0_8px_white]" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    </header>

                    <main class="p-5 space-y-4">
                        <div onclick="toggleTask('challenge')" class="p-5 rounded-3xl border-2 transition-all cursor-pointer tap-scale ${currentLog.challenge ? 'bg-emerald-600 border-emerald-600 text-white shadow-lg' : 'bg-orange-50 border-orange-200 text-orange-900 shadow-sm'}">
                            <div class="flex items-center justify-between">
                                <div class="flex gap-4">
                                    <i data-lucide="award" class="${currentLog.challenge ? 'text-white' : 'text-orange-600'}"></i>
                                    <div><p class="text-[10px] font-black uppercase opacity-70 tracking-tighter">Reto Criss Lombeida</p><h3 class="font-bold">${data.challenge}</h3></div>
                                </div>
                                ${currentLog.challenge ? '<i data-lucide="check-circle-2"></i>' : ''}
                            </div>
                        </div>

                        <h2 class="text-[10px] font-black text-slate-400 px-1 uppercase tracking-widest">Rutina Diaria</h2>
                        <div class="space-y-3">
                            ${renderActionCard('ritual', 'Ritual / Batido', data.ritual.name, 'sun', 'text-amber-500', currentLog.ritual)}
                            ${renderActionCard('breakfast', 'Desayuno', data.meals.breakfast.name, 'coffee', 'text-blue-500', currentLog.breakfast)}
                            ${renderActionCard('lunch', 'Almuerzo', data.meals.lunch.name, 'utensils', 'text-emerald-500', currentLog.lunch)}
                            ${renderActionCard('exercise', 'Ejercicio', data.exercise.name, 'activity', 'text-indigo-500', currentLog.exercise)}
                            ${renderActionCard('dinner', 'Cena', data.meals.dinner.name, 'moon', 'text-purple-500', currentLog.dinner)}
                        </div>
                        
                        <p class="text-center text-[9px] text-slate-300 font-bold uppercase tracking-widest mt-4">Diseñado por Criss Lombeida</p>
                    </main>
                    ${renderNav('home')}
                </div>
            `;
        }

        function renderDiet(app, data, dayNum) {
            app.innerHTML = `
                <div class="fade-in p-6">
                    <h1 class="text-3xl font-black text-slate-800 mb-2 leading-tight tracking-tighter uppercase">Recetario Nacional</h1>
                    <p class="text-slate-500 mb-8 italic text-sm font-medium">Por Criss Lombeida • Sabores de Ecuador (Día ${dayNum}).</p>
                    
                    <div class="space-y-6">
                        ${renderMealRecipe('Ritual / Batido', data.ritual, 'sun', 'text-amber-500')}
                        ${renderMealRecipe('Desayuno Andino', data.meals.breakfast, 'coffee', 'text-blue-500')}
                        ${renderMealRecipe('Almuerzo Saludable', data.meals.lunch, 'utensils', 'text-emerald-500')}
                        ${renderMealRecipe('Cena Depurativa', data.meals.dinner, 'moon', 'text-purple-500')}
                    </div>
                </div>
                ${renderNav('diet')}
            `;
        }

        function renderMealRecipe(title, meal, icon, color) {
            return `
                <details class="group border-2 border-slate-100 rounded-[2rem] overflow-hidden bg-white shadow-sm open:border-emerald-200 transition-all">
                    <summary class="p-5 flex items-center justify-between cursor-pointer">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-slate-50 rounded-2xl flex items-center justify-center border group-open:bg-emerald-50 group-open:border-emerald-200 transition-colors">
                                <i data-lucide="${icon}" class="${color} w-5 h-5"></i>
                            </div>
                            <div>
                                <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">${meal.time || 'En ayunas'}</span>
                                <h3 class="font-bold text-slate-800 text-sm leading-tight">${meal.name}</h3>
                            </div>
                        </div>
                        <i data-lucide="chevron-down" class="text-slate-300 group-open:rotate-180 transition-transform"></i>
                    </summary>
                    <div class="p-5 pt-0 bg-slate-50/50">
                        <div class="h-px bg-slate-100 mb-4"></div>
                        ${meal.ingredients ? `
                            <p class="text-[10px] font-black text-emerald-600 uppercase mb-2">Ingredientes:</p>
                            <ul class="text-[11px] text-slate-600 space-y-1 mb-4 font-medium">
                                ${meal.ingredients.map(i => `<li>• ${i}</li>`).join('')}
                            </ul>
                        ` : ''}
                        <p class="text-[10px] font-black text-emerald-600 uppercase mb-2">Preparación por Criss Lombeida:</p>
                        <p class="text-[11px] text-slate-600 leading-relaxed font-medium">${meal.recipe}</p>
                    </div>
                </details>
            `;
        }

        function renderStats(app) {
            const allLogs = Object.values(state.logs);
            const totalTasks = allLogs.length * 6;
            const totalDone = allLogs.reduce((acc, log) => acc + Object.values(log).filter(v => v).length, 0);
            const totalPercent = totalTasks > 0 ? Math.round((totalDone / totalTasks) * 100) : 0;

            app.innerHTML = `
                <div class="fade-in p-6">
                    <h1 class="text-3xl font-black text-slate-800 mb-6 tracking-tighter uppercase">Mis Logros</h1>
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="bg-emerald-600 p-6 rounded-[2.5rem] text-white shadow-lg text-center">
                            <p class="text-[10px] font-bold opacity-80 uppercase tracking-widest">Limpieza</p>
                            <h2 class="text-3xl font-black">${totalPercent}%</h2>
                        </div>
                        <div class="bg-slate-900 p-6 rounded-[2.5rem] text-white shadow-lg text-center">
                            <p class="text-[10px] font-bold opacity-80 uppercase tracking-widest">Racha</p>
                            <h2 class="text-3xl font-black">${state.profile.streak} d</h2>
                        </div>
                    </div>
                    <div class="bg-white border-2 border-slate-100 rounded-[2.5rem] p-8 mb-8 text-center shadow-sm">
                        <div class="w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="award" class="w-8 h-8 text-emerald-500"></i>
                        </div>
                        <h3 class="font-black text-slate-800 mb-2">¡Bien hecho, ${state.profile.name}!</h3>
                        <p class="text-[11px] text-slate-500 leading-relaxed font-medium px-4 uppercase tracking-tighter">Sistema digital diseñado por Criss Lombeida.<br>Reducción natural acelerada de lípidos.</p>
                        <p class="text-[9px] text-slate-400 mt-4 uppercase font-black tracking-widest border-t pt-2 border-slate-100">Autor del Sistema: Criss Lombeida</p>
                    </div>
                    <button onclick="resetApp()" class="w-full py-4 text-red-400 text-[10px] font-black uppercase tracking-widest border-2 border-red-50 rounded-3xl tap-scale transition-all">Reiniciar Todo</button>
                </div>
                ${renderNav('stats')}
            `;
        }

        function renderActionCard(key, title, label, icon, colorClass, isDone) {
            return `<div onclick="toggleTask('${key}')" class="tap-scale p-4 rounded-[2.2rem] border-2 flex items-center gap-4 transition-all ${isDone ? 'bg-slate-50 border-slate-100 opacity-60 shadow-inner' : 'bg-white border-white shadow-sm'}">
                <div class="p-3 rounded-2xl bg-slate-50 border shadow-inner"><i data-lucide="${isDone ? 'check' : icon}" class="${isDone ? 'text-emerald-600' : colorClass} w-5 h-5"></i></div>
                <div class="flex-1"><p class="text-[10px] font-black uppercase text-slate-400 leading-none mb-1">${title}</p><h3 class="font-bold text-slate-800 text-[13px] ${isDone ? 'line-through' : ''}">${label}</h3></div>
                <i data-lucide="chevron-right" class="text-slate-300 w-4 h-4"></i>
            </div>`;
        }

        function renderNav(active) {
            return `<nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/95 backdrop-blur-md border-t h-20 flex justify-around items-center px-4 z-50">
                <button onclick="changeView('home')" class="flex flex-col items-center gap-1 ${active === 'home' ? 'text-emerald-600' : 'text-slate-400'}"><i data-lucide="home"></i><span class="text-[10px] font-black uppercase tracking-tighter">Hoy</span></button>
                <button onclick="changeView('diet')" class="flex flex-col items-center gap-1 ${active === 'diet' ? 'text-emerald-600' : 'text-slate-400'}"><i data-lucide="book-open"></i><span class="text-[10px] font-black uppercase tracking-tighter">Recetas</span></button>
                <button onclick="changeView('stats')" class="flex flex-col items-center gap-1 ${active === 'stats' ? 'text-emerald-600' : 'text-slate-400'}"><i data-lucide="activity"></i><span class="text-[10px] font-black uppercase tracking-tighter">Logros</span></button>
            </nav>`;
        }

        function renderOnboarding(app) {
            app.innerHTML = `<div class="p-8 flex flex-col justify-center min-h-screen text-center bg-emerald-600">
                <div class="bg-white w-28 h-28 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl animate-pulse"><i data-lucide="heart" class="text-emerald-600 fill-emerald-600 w-14 h-14"></i></div>
                <h1 class="text-5xl font-black text-white tracking-tighter mb-2 leading-none uppercase">VITALIA</h1>
                <p class="text-emerald-100 mb-8 font-bold uppercase tracking-widest text-[10px]">App de Salud Nacional por Criss Lombeida</p>
                <div class="bg-white p-10 rounded-[4rem] shadow-2xl space-y-6">
                    <p class="text-[11px] text-slate-400 font-bold uppercase tracking-tighter leading-relaxed">Diseñado por Criss Lombeida para adultos 40-60 años.<br>Cocina Ecuatoriana & Batidos Verdes.</p>
                    <input type="text" id="nameInput" class="w-full p-5 bg-slate-50 border-2 border-slate-100 rounded-3xl focus:border-emerald-500 outline-none transition-all font-bold text-center" placeholder="¿Tu nombre?">
                    <button onclick="startApp()" class="w-full py-6 bg-emerald-600 text-white rounded-3xl font-black text-lg shadow-xl tap-scale transition-all uppercase tracking-widest">EMPEZAR LIMPIEZA</button>
                    <p class="text-[9px] text-slate-300 font-black uppercase tracking-widest">Autor: Criss Lombeida</p>
                </div>
            </div>`;
            lucide.createIcons();
        }

        window.changeView = (v) => { state.currentView = v; render(); window.scrollTo(0,0); };
        window.startApp = () => {
            const n = document.getElementById('nameInput').value; if (!n) return;
            state.profile = { name: n, startDate: new Date().toISOString(), streak: 1 };
            saveState(); render();
        };
        window.toggleTask = (k) => {
            const tid = getTodayId(); state.logs[tid][k] = !state.logs[tid][k];
            saveState(); render();
        };
        window.resetApp = () => { if(confirm("¿Seguro Criss Lombeida? Se borrará todo tu progreso.")) { localStorage.clear(); location.reload(); } };

        render();
    </script>
</body>
</html>
